define("modules/signup/submit/js/index",[""],function(require,exports,module){function init(opts){if("weixin"===platform)$.getScript("http://res.wx.qq.com/open/js/jweixin-1.0.0.js",function(response,status){wx.config(page_data.default_data.modules[0].data.jssdk)}),seajs.use("http://res.wx.qq.com/open/js/jweixin-1.0.0.js",function(weixinSDK){wx=weixinSDK;var info={debug:false,jsApiList:["chooseImage","uploadImage"]};for(var key in page_data.default_data.modules[0].data.jssdk)if("url"!=key)info[key]=page_data.default_data.modules[0].data.jssdk[key];try{wx.ready(function(){}),wx.error(function(res){}),wx.config(info)}catch(e){}});else if("weibo"===platform)$.getScript("http://tjs.sjs.sinajs.cn/open/thirdpart/js/jsapi/mobile.js",function(response,status){});$("#st_modules_signup_submit").on("touchend","#submit",function(){for(var validateItem=$("[data-validate]"),validateStatus=true,ajaxData={},i=0;i<validateItem.length;i++){var value=validateItem.eq(i).val(),type=validateItem.eq(i).data("validate");if(ajaxData[type]=value,validate[type]&&!validate[type](value))return void(validateStatus=false)}if(!validateStatus)return;$.ajax({type:"post",url:page_data.default_data.modules[0].data.submit_url,dataType:"json",data:ajaxData,success:function(msg){if(0!=msg.code){if(502==msg.code)return void(window.location.href=msg.url);return void alert(msg.message)}window.location.href=page_data.default_data.modules[0].data.next_url},error:function(){alert("网络错误，请刷新页面或稍后重试")}})})}function destroy(opts){$("#st_modules_signup_submit").off(),validate=null}var wx=(require(""),null),validate={user_name:function(value){var user_name=$.trim(value),reg=/^[0-9a-zA-Z\u4e00-\u9fa5_·-]{1,30}$/;if(!reg.test(user_name))return this.handle("user_name"),false;return true},phone:function(value){var phone=$.trim(value),reg=/^1[3|4|5|7|8]\d{9}$/;if(!reg.test(phone))return this.handle("phone"),false;return true},weibo_nick_name:function(value){$.trim(value);if(reg=/^[0-9a-zA-Z\u4e00-\u9fa5_-]{1,30}$/,!reg.test(value))return this.handle("weibo_nick_name"),false;return true},handle:function(item){var text={user_name:"亲，请输入正确姓名",phone:"亲，请输入正确的手机号",weibo_nick_name:"亲，请输入正确昵称"};setTimeout(function(){alert(text[item])},0)}},platform=page_data.default_data.modules[0].data.platform,that={init:init,destroy:destroy};return that});